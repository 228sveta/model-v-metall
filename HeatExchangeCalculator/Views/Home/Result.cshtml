@model HeatExchangeCalculator.Models.CalculationResult
@{
    ViewData["Title"] = "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞";
}

<!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
<div class="row mb-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5>üìà –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—á–µ—Ç–Ω—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3">
                        <p><strong>–ü–ª–æ—â–∞–¥—å —Å–µ—á–µ–Ω–∏—è:</strong><br>
                        <span class="h5">@Model.CrossSectionalArea.ToString("F3") –º¬≤</span></p>
                    </div>
                    <div class="col-md-3">
                        <p><strong>–û—Ç–Ω–æ—à–µ–Ω–∏–µ —Ç–µ–ø–ª–æ–µ–º–∫–æ—Å—Ç–µ–π (m):</strong><br>
                        <span class="h5">@Model.HeatCapacityRatio.ToString("F3")</span></p>
                    </div>
                    <div class="col-md-3">
                        <p><strong>–ü–æ–ª–Ω–∞—è –æ—Ç–Ω. –≤—ã—Å–æ—Ç–∞ (Y‚ÇÄ):</strong><br>
                        <span class="h5">@Model.TotalRelativeHeight.ToString("F3")</span></p>
                    </div>
                    <div class="col-md-3">
                        <p><strong>–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å:</strong><br>
                        <span class="h5">@Model.FullRelativeHeight.ToString("F4")</span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5>üìã –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä –ø–æ –≤—ã—Å–æ—Ç–µ —Å–ª–æ—è</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover">
                        <thead class="table-dark">
                            <tr>
                                <th>–í—ã—Å–æ—Ç–∞ y, –º</th>
                                <th>Y</th>
                                <th>Œ∏1</th>
                                <th>Œ∏2</th>
                                <th>œë</th>
                                <th>Œ∏</th>
                                <th>t, ¬∞C</th>
                                <th>T, ¬∞C</th>
                                <th>Œît, ¬∞C</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var point in Model.Points)
                            {
                                <tr>
                                    <td><strong>@point.Height.ToString("F1")</strong></td>
                                    <td>@point.Y.ToString("F2")</td>
                                    <td>@point.Theta1.ToString("F2")</td>
                                    <td>@point.Theta2.ToString("F2")</td>
                                    <td>@point.DimensionlessMaterialTemp.ToString("F2")</td>
                                    <td>@point.DimensionlessGasTemp.ToString("F2")</td>
                                    <td>@point.MaterialTemperature.ToString("F1")</td>
                                    <td>@point.GasTemperature.ToString("F1")</td>
                                    <td class="@(point.TemperatureDifference < 0 ? "text-danger" : "text-success")">
                                        @point.TemperatureDifference.ToString("F1")
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
<div class="row mt-5">
    <div class="col-md-12">
        <h3>üìà –ì—Ä–∞—Ñ–∏–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä</h3>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="chart-container">
            <canvas id="temperatureChart" width="400" height="300"></canvas>
        </div>
    </div>
    <div class="col-md-6">
        <div class="chart-container">
            <canvas id="differenceChart" width="400" height="300"></canvas>
        </div>
    </div>
</div>
<!-- –§–æ—Ä–º–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
<div class="row mt-4">
    <div class="col-md-8 offset-md-2">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h5>üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç</h5>
            </div>
            <div class="card-body">
                <form method="post" asp-action="SaveCalculation">
                    <!-- –ü–µ—Ä–µ–¥–∞–µ–º –≤—Å—é –º–æ–¥–µ–ª—å –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã -->
                    <input type="hidden" name="CrossSectionalArea" value="@Model.CrossSectionalArea" />
                    <input type="hidden" name="HeatCapacityRatio" value="@Model.HeatCapacityRatio" />
                    <input type="hidden" name="TotalRelativeHeight" value="@Model.TotalRelativeHeight" />
                    <input type="hidden" name="FullRelativeHeight" value="@Model.FullRelativeHeight" />
                    
                    <!-- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á–µ—Ç–∞ -->
                    <input type="hidden" name="Parameters.LayerHeight" value="@Model.Parameters.LayerHeight" />
                    <input type="hidden" name="Parameters.VolumetricHeatTransferCoefficient" value="@Model.Parameters.VolumetricHeatTransferCoefficient" />
                    <input type="hidden" name="Parameters.GasVelocity" value="@Model.Parameters.GasVelocity" />
                    <input type="hidden" name="Parameters.GasHeatCapacity" value="@Model.Parameters.GasHeatCapacity" />
                    <input type="hidden" name="Parameters.MaterialFlowRate" value="@Model.Parameters.MaterialFlowRate" />
                    <input type="hidden" name="Parameters.MaterialHeatCapacity" value="@Model.Parameters.MaterialHeatCapacity" />
                    <input type="hidden" name="Parameters.InitialMaterialTemperature" value="@Model.Parameters.InitialMaterialTemperature" />
                    <input type="hidden" name="Parameters.InitialGasTemperature" value="@Model.Parameters.InitialGasTemperature" />
                    <input type="hidden" name="Parameters.ApparatusDiameter" value="@Model.Parameters.ApparatusDiameter" />
                    
                    <div class="mb-3">
                        <label for="calculationName" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞:</label>
                        <input type="text" class="form-control" id="calculationName" 
                               name="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: '–ò—Å—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã'">
                        <div class="form-text">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è</div>
                    </div>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <button type="submit" class="btn btn-success btn-lg">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç
                        </button>
                        <a href="/" class="btn btn-primary btn-lg">
                            üîÑ –ù–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç
                        </a>
                        <button type="button" class="btn btn-info btn-lg" onclick="window.print()">
                            üñ®Ô∏è –†–∞—Å–ø–µ—á–∞—Ç–∞—Ç—å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</div>

<!-- –ë–ª–æ–∫ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ -->
<div class="row mt-5">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>–°–ª–æ–π –∏ –∞–ø–ø–∞—Ä–∞—Ç</h6>
                        <ul class="small">
                            <li>–í—ã—Å–æ—Ç–∞ —Å–ª–æ—è: @Model.Parameters.LayerHeight –º</li>
                            <li>–î–∏–∞–º–µ—Ç—Ä –∞–ø–ø–∞—Ä–∞—Ç–∞: @Model.Parameters.ApparatusDiameter –º</li>
                            <li>Œ±V: @Model.Parameters.VolumetricHeatTransferCoefficient –í—Ç/(–º¬≥¬∑–ö)</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6>–ú–∞—Ç–µ—Ä–∏–∞–ª</h6>
                        <ul class="small">
                            <li>–†–∞—Å—Ö–æ–¥: @Model.Parameters.MaterialFlowRate –∫–≥/—Å</li>
                            <li>–¢–µ–ø–ª–æ–µ–º–∫–æ—Å—Ç—å: @Model.Parameters.MaterialHeatCapacity –∫–î–∂/(–∫–≥¬∑–ö)</li>
                            <li>–ù–∞—á. —Ç–µ–º–ø.: @Model.Parameters.InitialMaterialTemperature ¬∞C</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6>–ì–∞–∑</h6>
                        <ul class="small">
                            <li>–°–∫–æ—Ä–æ—Å—Ç—å: @Model.Parameters.GasVelocity –º/—Å</li>
                            <li>–¢–µ–ø–ª–æ–µ–º–∫–æ—Å—Ç—å: @Model.Parameters.GasHeatCapacity –∫–î–∂/(–º¬≥¬∑–ö)</li>
                            <li>–ù–∞—á. —Ç–µ–º–ø.: @Model.Parameters.InitialGasTemperature ¬∞C</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- –§–æ—Ä–º–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
    <div class="row mt-4">
        <div class="col-md-8 offset-md-2">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5>üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç</h5>
                </div>
                <div class="card-body">
                    <form method="post" asp-action="SaveCalculation">
                        <input type="hidden" name="result" value='@Json.Serialize(Model)' />
                        
                        <div class="mb-3">
                            <label for="calculationName" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞:</label>
                            <input type="text" class="form-control" id="calculationName" 
                                name="name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: '–ò—Å—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã'">
                            <div class="form-text">–û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è</div>
                        </div>
                        
                        <button type="submit" class="btn btn-success">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å—á–µ—Ç
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="~/js/charts.js"></script>